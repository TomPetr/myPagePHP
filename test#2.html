<!DOCTYPE html>
<html lang="en">

<head>
    <title>My Website</title>
    <!-- stylesheets -->
    <link rel="stylesheet" href="./css/style.css" />
    <!-- favicon -->
    <link rel="icon" href="./favicon.ico" type="image/ico" sizes="16x16" />
    <style>

    </style>
</head>

<body style="background-color: #fff; padding: 1rem;">
    <h2>Contact</h2>

    <form action="./test#2.html" method="POST" target="_self" name="my-form" id="contact-form" width="100%"
        onsubmit="validateFormFx(event)">
        <fieldset>
            <legend>Hire Me!</legend>

            <input type="text" name="first-name" id="first-name" placeholder="Your First Name..." class="req imp-el" />
            <label for="first-name">*</label>
            <br /><br />
            <input type="text" name="last-name" id="last-name" placeholder="Your Last Name..." class="req imp-el" />
            <label for="last-name">*</label>
            <br /><br />
            <input type="email" name="email" id="email" placeholder="Your Email..." class="req imp-el" />
            <label for="email">*</label>
            <br /><br />
            <input type="tel" name="phone" id="phone" placeholder="000-000-0000" pattern="[0-9]{3}-[0-9]{3}-[0-9]{4}"
                class="req" />
            <label for="phone">*</label>
            <br /><br />
            <input type="text" name="subject" id="subject" placeholder="Subject..." class="req imp-el" />
            <label for="subject">*</label>
            <br /><br />

            <textarea name="message" id="message" rows="5" class="req" placeholder="Write me a message.."></textarea>
            <label for="message">*</label>



            <fieldset>
                <legend>I Prefer To Communicate Via:</legend>
                <select name="com" id="com">
                    <option value="phone-call">Phone Calls</option>
                    <option value="text-mes">Text Messages</option>
                    <option value="emails" Emails>Emails</option>
                    <option value="Skype">Skype</option>
                    <option value="WatsApp">WhatsApp</option>
                    <option value="Facebook">Facebook</option>
                    <option value="Hangouts">Hangouts</option>
                    <option value="person" selected>In Person</option>
                </select>
            </fieldset>
            <input type="radio" name="news" id="news" />
            <span>Please send me the newsletter by email.</span>
            <input type="submit" name="submit" id="submit" value="Submit!" />
        </fieldset>
    </form>




    <script>
        function validateFormFx(event) {
            // ***** CONTACT FORM VALIDATION *****

            // ** 1) this block of code gets ahold of all form's input elements which are rquired to fill in
            // These elements have CSS class "req" and the code is testing each form's element for this CSS class
            var formName = event.target.name;

            console.log();



            var allElements = document.forms[formName]['elements']; // HTMLFormControlsCollection of all form's elements
            var allElArray = Array.from(allElements); // converting this collection to an Array
            console.log(allElArray);

            // filtering out all the required elements and saving then in new HTMLcollection object variable
            var reqElements = allElArray.filter(reqEl => {
                // "classList" variable holds array-like object "DOMTokenList", named "classList", list  of all CSS class names of given
                // "reqEl" element
                var classList = reqEl["classList"];

                console.log(classList);
                // looping through all CSS class properties of this "DOMTokenList"
                for (var i = 0; i < classList.length; i++) {
                    // if there is a CSS class named 'req' add the element which the class belongns to the "reqElements" array
                    if (classList[i] == 'req') {
                        return classList;
                    }
                }
            });
            console.log(reqElements);
            // ** 2) "validateFormFx" function validates the form if all required fields are filled in & handles the CSS
            decoration
            // depending on fields's status, if they are filled in or not
            reqElements.forEach((el, index) => {
                // if the required input element has the empty value
                if (el['value'] == "") {
                    el.classList.add("req-field"); // adds the red border
                    reqElements[index].nextElementSibling.innerHTML = '*'; // place " * " next to that
                    reqElements[index].nextElementSibling.style =
                        'color: #d50505; vertical-align: top'; // and set its color as red and moves it vertically


                    // prevents the page  to be reloaded if any required field is  empty
                    event.preventDefault();

                    // prevents the form being submitted if any required field is empty
                    return false;
                } else {
                    el.classList.remove("req-field"); // // removes the red border
                    reqElements[index].nextElementSibling.innerHTML =
                        '&#10004;'; // replaces " * " with a check mark
                    reqElements[index].nextElementSibling.style =
                        'color: green; vertical-align: bottom'; // and set its color as green and moves it vertically


                    // it's OK the form is being submitted now
                    return true;
                }
            })
        }
    </script>


</body>

</html>